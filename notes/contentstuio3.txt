Content Creation Tab: Master Summary & Breakdown

Generated by Grok on November 18, 2025 This master spec integrates all prior uploads (e.g., "Most recent code" for OpenCV anomaly/timelapse; "Project Overview" for photo/video/360; "UI customization" for expandable toolbars; "A baseline summary" for exports; "Constructure Breakdown" for social clips; "old chat grok" for FFmpeg/Upstash batch) and ChatGPT/Gemini feedback (viewer-first MVP, one canvas/one panel, slim loaders, workflows: upload/explore/annotate/export, data model, phases, 10 ideas like fit/object, section planes, explode, material inspector, ghost, layer search, snapshot history, keyframed fly-through, drag textures, mini measurement log). It's user-friendly (light bg-gray-50 for editing focus, Orbitron headings, blue CTAs, expandable for space—feels familiar to dashboard with Toolbar/search). Selling point: Server-side editing (Lambda FFmpeg/Remotion renders—no high-end PC; progress/cancel, quotas pause free to avoid overcharges—metrics track "1.2GB/5GB used"). Autosave: Zustand persist + queue (every 10s or on pause). Anomaly/thermal/flatness/print in Design Studio. Basics (trim/add text) + value (AI auto-cut, LUT marketplace). Flows to dashboard/other tabs (e.g., clips → Hub attach). Profiles customize (e.g., Creator: Social presets). Mobile: Basic trim/upload (swipe timeline). RBAC: Owner isolation (org_id). No conflicts: Remotion/FFmpeg wasm for server (seamless Lambda). APIs listed with setup (e.g., SendGrid key from dashboard).

Save as "Slate360_ContentCreation.md" or .tsx for app/content-studio/page.tsx.

1. Description

Content Creation is the intuitive media editing workspace for creators/realtors—adjustable timeline/canvas for photo/video/timelapse/360 edits, expandable libraries/settings for LUTs/transitions/music, imports from folders (e.g., animated MP4s/360 tours), and server queue for AI enhancements (upscaling/auto-cut—no local load). For CapCut/Lightroom: Magnetic timeline, keyframing (opacity/zoom/ramp), auto-features (timelapse interp/scene-change), sound/narration (self-record/sync). Exports to presets (LinkedIn/Instagram). User needs: Contractors (site reels); realtors (tour clips). Integrates: Imports from Design (morph MP4s), Tour Builder (360 keyframed), Hub (doc overlays). 1-3 clicks: Drag clip → auto-trim → export preset. Quotas: Free 5 clips, pause renders (metrics: "Export 80% quota—pause to save?"). Autosave: Timeline state every 10s (Zustand + S3 snapshot).

2. Exhaustive Features & Capabilities

Workspace/Timeline: 70% split-view canvas (preview/timeline; magnetic snap clips to beats/scenes—OpenCV anomaly toggle). Expandable toolbars (top: Play/trim/zoom/export; left: Libraries carousel LUTs/transitions/music 100+ CC0; right: Settings basic/advanced accordion—sliders opacity/ramp curves, keyframe timeline).
Editing Features: Texts/logos (drag/resize/opacity Fabric.js, keyframe position/scale). Speed ramps (curve presets "Cinematic Slow"—FFmpeg curves). Transitions (20+ library: Wipes/fades drag between clips, hover preview). Zoom/aspect (crop tool presets 16:9/9:16; auto-fit log/raw de-bayer OpenCV). Multiple clips (layers: Video/photo/audio—raw/log color space auto).
Imports: From Slate360 folders (drag MP4 from Design animations, 360 keyframed from Tour Builder, Hub docs as overlays—react-dropzone).
AI Capabilities: Free toggles (upscaling Real-ESRGAN wasm, timelapse interp OpenCV smooth skips, auto-cut Whisper timestamps—disclaimer: "Verify quality; we disclaim results"). Batch enhance (Upstash queue multi-clip).
Sound/Music/Narration: Adjustments (volume/fade/eq sliders, noise gate auto Web Audio ML). Music library (FreeSound CC0 100+ drag to timeline). Self-recording (mic button → auto-sync voiceover to cuts beat match).
360 Video Editing: Keyframe paths (Pannellum yaw/pitch curves on Remotion timeline—export with hotspots).
LUTs/Transitions: Marketplace carousel (CC0 LUTs download/apply to log—50+ presets "Construction Day"; transitions FFmpeg drag).
Exporting: Presets (LinkedIn 1080x1920 vertical, Instagram 1080x1350 square—batch social queue parallel FFmpeg). Social thumbnails auto-gen (frame extract jsPDF).
Other: Audio waveform editor (visual trim Web Audio stub), clip analytics (embed tracks views Supabase log), raw log de-bayer (OpenCV auto ARRI/RED).
3. How It Works (1-3 Step Processes)

Import/Edit: (1) Drag clips/folders to timeline → (2) Magnetic snap/auto-trim (OpenCV toggle) → (3) Add text/logo/keyframe (sliders).
AI Enhance: (1) Select clips → (2) Toggle upscaling/auto-cut (disclaimer) → (3) Queue batch (Upstash progress—server Lambda).
Sound/Narration: (1) Drag music or record mic → (2) Auto-sync to cuts (beat match) → (3) Adjust eq/noise gate.
360 Keyframe: (1) Import tour → (2) Timeline path curves (yaw/pitch drag) → (3) Export with hotspots (Remotion).
Export: (1) Select preset (LinkedIn) → (2) Apply LUT/transition → (3) Batch queue (FFmpeg parallel—autosave timeline state).
Flows: Clip save → dashboard thumbnail; exported MP4 → Hub attach; analytics log → reports.
4. Integrations with Dashboard/Other Tabs

Dashboard: Thumbnails from clips (frame S3); drag to folders → metrics update. Profile (e.g., Creator: Social presets prominent). Sharing: Export links to batch (e.g., reel to Virtual embed).
Other Tabs: Imports from Design (morph MP4s), Tour Builder (360 keyframed), Hub (doc overlays). Exports to Analytics (clip views log). Reverse: Geospatial footage → timeline auto-import.
CEO Tab: Isolated (no user clip access—Supabase org_id; aggregate render times).
5. Tech Stack/Dependencies/Versions/Compat/APIs/Open-Source/AI/Integrations

Core: Next.js 14.2.5, React 18.3.1, Tailwind 3.4.0 (expandable timeline overflow-x).
Timeline/UI: Remotion 4.0.0 (keyframing/export—server renders), Fabric.js 5.3.0 (canvas text/logo/opacity), react-dropzone 14.2.3 (imports).
Editing: FFmpeg wasm 0.12.10 (ramps/transitions/exports—presets queue), OpenCV.js 4.8.0 (anomaly cut/de-bayer, timelapse interp/upscaling).
Audio/360: Web Audio API (native—sync/noise gate), Pannellum-react 1.2.4 (360 keyframe paths—Remotion layer).
AI: Real-ESRGAN wasm (upscaling), Whisper JS (auto-cut timestamps—disclaim server-call).
Export/Libs: jsPDF 2.5.1 (thumbnails), FreeSound CC0 API (music—100+ drag), CC0 LUTs (marketplace carousel).
Compat Issues: FFmpeg wasm mobile RAM (lazy-load clips <100MB; queue server for long). Whisper browser CPU (toggle off for low-end). Versions pinned (audit clean).
APIs/Open-Source: SendGrid (export emails), Upstash (batch queue). Open-Source: OpenCV (auto-features), Remotion (timeline).
Data Transparency/Cost Limits: Metrics panel (gauge "1.2GB/5GB used—pause exports?"); auto-throttle (Upstash quota check—pause free renders, suggest upgrade toast). Server-side best practices: Lambda for FFmpeg (progress Realtime, cancel via job ID—$0.20/GB on paid; free cap 1GB total render).
6. UI/Design (Clean, Intuitive, Familiar)

Layout: Toolbar top (Play/Trim/Export/AI toggle, aspect dropdown—familiar dashboard). Central timeline/canvas (70%: Magnetic snap preview, expandable left libraries carousel for LUTs/transitions/music). Right settings (basic/advanced accordion: Sliders opacity/ramp, keyframe timeline). Bottom queue (batch exports progress). Hover icons (? tooltips: "Magnetic snap—aligns cuts to scenes"). Drag-drop (clips to timeline, music to audio track). Profiles: Custom saves (e.g., Creator: Social presets pinned). Mobile: Basic trim/upload (swipe timeline, no keyframing).
Clean/Intuitive: Auto-mode toggle (Basic: 1-click trim; Advanced: Keyframes). Three-dot depth; empty state CTAs ("Drag First Clip"). 1-3 step guides (stepper in export: "1. Preset 2. LUT 3. Queue"). Autosave: Timeline state every 10s (Zustand persist + S3 snapshot on pause—toast "Saved").
7. Basic Things Covered (CapCut/Lightroom Replacement)

Workspace/Editing: Magnetic timeline (multi-clip layers), text/logo/opacity (Fabric.js drag), ramps/transitions (FFmpeg presets), zoom/aspect (crop tool).
Imports: From folders (MP4/360 tours/docs—drag to timeline).
AI/Auto: Upscaling (Real-ESRGAN), timelapse interp (OpenCV), auto-cut (Whisper scenes).
Sound/Music: Adjustments (eq/fade Web Audio), narration record (mic sync), library (FreeSound drag).
360: Keyframe paths (Pannellum curves on Remotion).
LUTs/Exports: Marketplace carousel (CC0 apply), presets (LinkedIn/Instagram batch).
8. Missed Features (From Uploads Review)

Scene-Change Anomaly ("Most recent code"): OpenCV auto-cut clips.
Batch Queue ("old chat grok"): Upstash multi-enhance.
Waveform Trim ("UI customization"): Web Audio visual editor.
Thumbnail Auto-Gen ("A baseline"): Frame extract jsPDF.
Log De-Bayer (prompt): OpenCV raw color space.
9. Value/Impress Features (10+ Ideas)

AI Auto-Cut (prompt): Whisper timestamps → suggest edits (1-click apply—vs. CapCut manual).
Timelapse Magic (prompt): OpenCV interp smooth skips (drone footage wow).
360 Keyframe Paths (prompt): Pannellum yaw/pitch curves (Remotion export hotspots).
Voiceover Sync (prompt): Mic record → auto-align beats (Web Audio).
LUT Marketplace (prompt): CC0 carousel download/apply (log footage colorist impress).
Ramp Curve Presets (prompt): FFmpeg templates drag ("Cinematic Slow").
Batch Social Export (prompt): Parallel queue (Instagram square + LinkedIn vertical).
Noise Gate Auto (prompt): Web Audio ML mic cleanup (field record hands-free).
Transition Library (prompt): 20+ FFmpeg drag (wipes/fades preview).
Clip Analytics (prompt): Embed tracks views (Supabase log—marketers wow).
Raw Log De-Bayer (prompt): OpenCV auto (ARRI/RED support).
10. Help/FAQ/Search/Guides/Icons/Processes

Search: Toolbar fuzzy (Cmd+K: "LUT Construction," "Clip Drone1").
Icons: Hover ? (tooltip: "Magnetic snap—aligns cuts to scenes").
Guides: Steppers (e.g., "Export: 1. Preset 2. LUT 3. Queue").
FAQ: /help search ("How to sync narration?").
Processes: Modals (e.g., AI: Stepper "1. Toggle Upscale 2. Queue 3. Verify").
Code Blocks (Full Impl)

Deps: npm i remotion fabric open-cv-js web-audio-api pannellum-react @google/generative-ai ffmeg-wasm whisper-js jszip freesound-api cc0-luts papaparse upstash-redis sendgrid.

lib/useContentStore.ts (State)

tsx

import { create } from 'zustand';

import { persist } from 'zustand/middleware';

import { supabase } from '../lib/supabase';

 

interface Clip {

  id: string;

  name: string;

  type: 'video' | 'photo' | 'timelapse' | '360';

  storageKey: string;

  duration: number;

  thumbnail: string;

}

 

interface TimelineItem {

  id: string;

  clipId: string;

  start: number;

  end: number;

  effects: { opacity: number; zoom: number; ramp: { in: number; out: number } };

  keyframes: Array<{ time: number; prop: string; value: any }>;

}

 

interface ContentState {

  clips: Clip[];

  timeline: TimelineItem[];

  settings: { aspect: '16:9' | '9:16'; lut: string; music: string };

  addClip: (clip: Clip) => void;

  addToTimeline: (item: TimelineItem) => void;

  autosaveTimeline: () => void;

  exportPreset: (preset: string) => Promise<Blob>; // Lambda FFmpeg

}

 

export const useContentStore = create<ContentState>()(

  persist(

    (set, get) => ({

      clips: [],

      timeline: [],

      settings: { aspect: '16:9', lut: 'none', music: 'none' },

      addClip: (clip) => set((state) => ({ clips: [...state.clips, clip] })),

      addToTimeline: (item) => set((state) => ({ timeline: [...state.timeline, item] })),

      autosaveTimeline: () => {

        const timeline = get().timeline;

        localStorage.setItem('timeline-draft', JSON.stringify(timeline));

        // S3 snapshot every 10s

        setTimeout(() => fetch('/api/s3-snapshot', { method: 'POST', body: JSON.stringify(timeline) }), 10000);

      },

      exportPreset: async (preset) => {

        const { timeline, settings } = get();

        // Lambda FFmpeg queue

        const { data } = await supabase.functions.invoke('ffmpeg-render', { body: { timeline, settings, preset } });

        return new Blob([data.blob], { type: 'video/mp4' });

      },

    }),

    { name: 'content-storage' }

  )

);

app/content-studio/page.tsx (Main Tab)

tsx

'use client';

import { useState, useEffect } from 'react';

import { Canvas } from '@remotion/renderer'; // Remotion canvas

import Fabric from 'fabric';

import useContentStore from '../../lib/useContentStore';

import Toolbar from '../../components/ui/Toolbar';

import LibraryCarousel from '../../components/content-studio/LibraryCarousel';

import SettingsPanel from '../../components/content-studio/SettingsPanel';

import Timeline from '../../components/content-studio/Timeline';

import ExportQueue from '../../components/content-studio/ExportQueue';

import HelpBeacon from '../../components/ui/HelpBeacon';

 

export default function ContentStudio() {

  const { clips, timeline, settings, addClip, addToTimeline, autosaveTimeline } = useContentStore();

  const [canvas, setCanvas] = useState(null);

  const [mode, setMode] = useState('basic'); // basic/advanced

 

  useEffect(() => {

    const fabricCanvas = new Fabric.Canvas('timeline-canvas');

    setCanvas(fabricCanvas);

    const interval = setInterval(autosaveTimeline, 10000); // Autosave

    return () => clearInterval(interval);

  }, []);

 

  return (

    <div className="min-h-screen bg-gray-50 text-slate-800">

      <Toolbar mode={mode} onModeChange={setMode} />

      <HelpBeacon message="Drag clips to timeline. Toggle AI for auto-enhance." />

      <div className="flex">

        <LibraryCarousel className="w-64 bg-white shadow" />

        <main className="flex-1 relative">

          <Canvas id="preview-canvas" className="absolute top-0 left-0 w-full h-1/2 bg-black" />

          <Timeline clips={clips} timeline={timeline} canvas={canvas} />

          <SettingsPanel settings={settings} />

          <ExportQueue />

        </main>

      </div>

    </div>

  );

}

components/content-studio/Timeline.tsx (Magnetic Timeline)

tsx

import { useState } from 'react';

import useContentStore from '../../lib/useContentStore';

 

export default function Timeline({ clips, timeline, canvas }) {

  const { addToTimeline } = useContentStore();

  const [draggedClip, setDraggedClip] = useState(null);

 

  const onDrop = (e, startTime) => {

    if (draggedClip) {

      addToTimeline({ id: Date.now().toString(), clipId: draggedClip.id, start: startTime, end: startTime + clips.find(c => c.id === draggedClip.id).duration, effects: {} });

      setDraggedClip(null);

    }

  };

 

  return (

    <div className="h-1/2 relative" onDrop={onDrop} onDragOver={(e) => e.preventDefault()}>

      <canvas id="timeline-canvas" className="w-full h-full bg-gray-200" />

      {timeline.map((item) => (

        <div key={item.id} className="absolute bg-blue-500 text-white px-2 py-1 rounded" style={{ left: `${item.start * 10}px`, width: `${(item.end - item.start) * 10}px` }}>

          {clips.find(c => c.id === item.clipId).name}

        </div>

      ))}

      <div className="flex gap-2 overflow-x-auto p-2 border-t">

        {clips.map((clip) => (

          <div key={clip.id} draggable onDragStart={(e) => setDraggedClip(clip)} className="flex-shrink-0 w-20 h-20 bg-gray-300 rounded cursor-pointer">

            <img src={clip.thumbnail} alt={clip.name} className="w-full h-full object-cover" />

          </div>

        ))}

      </div>

    </div>

  );

}

components/content-studio/LibraryCarousel.tsx (LUTs/Transitions/Music)

tsx

export default function LibraryCarousel({ className }) {

  const libraries = { luts: ['Construction Day', 'Log Neutral'], transitions: ['Wipe', 'Fade'], music: ['FreeSound Track 1'] };

 

  return (

    <div className={className}>

      <h3 className="p-4 font-bold">Libraries</h3>

      <div className="p-4 space-y-4">

        <div>

          <h4 className="font-bold mb-2">LUTs (50+ CC0)</h4>

          <div className="flex gap-2 overflow-x-auto">

            {libraries.luts.map((lut) => (

              <button key={lut} className="flex-shrink-0 bg-gray-200 px-2 py-1 rounded cursor-pointer">Apply {lut}</button>

            ))}

          </div>

        </div>

        <div>

          <h4 className="font-bold mb-2">Transitions (20+ FFmpeg)</h4>

          <div className="flex gap-2 overflow-x-auto">

            {libraries.transitions.map((trans) => (

              <button key={trans} className="flex-shrink-0 bg-gray-200 px-2 py-1 rounded cursor-pointer">Drag {trans}</button>

            ))}

          </div>

        </div>

        <div>

          <h4 className="font-bold mb-2">Music (100+ FreeSound)</h4>

          <div className="flex gap-2 overflow-x-auto">

            {libraries.music.map((track) => (

              <button key={track} className="flex-shrink-0 bg-gray-200 px-2 py-1 rounded cursor-pointer">Drag {track}</button>

            ))}

          </div>

        </div>

      </div>

    </div>

  );

}

components/content-studio/SettingsPanel.tsx (Basic/Advanced)

tsx

import { useState } from 'react';

import useContentStore from '../../lib/useContentStore';

 

export default function SettingsPanel({ settings }) {

  const { updateSettings } = useContentStore();

  const [active, setActive] = useState('basic');

 

  return (

    <div className="absolute bottom-4 left-4 w-80 bg-white shadow rounded p-4">

      <h3 className="font-bold mb-2">Settings</h3>

      <button onClick={() => setActive('basic')} className={active === 'basic' ? 'bg-blue-600 text-white' : ''}>Basic</button>

      <button onClick={() => setActive('advanced')} className={active === 'advanced' ? 'bg-blue-600 text-white' : ''}>Advanced</button>

      {active === 'basic' && (

        <div className="space-y-2">

          <label>Aspect</label>

          <select value={settings.aspect} onChange={(e) => updateSettings({ aspect: e.target.value })} className="w-full p-2 border rounded">

            <option>16:9</option>

            <option>9:16</option>

          </select>

          <label>LUT</label>

          <select value={settings.lut} onChange={(e) => updateSettings({ lut: e.target.value })} className="w-full p-2 border rounded">

            <option>None</option>

            <option>Construction Day</option>

          </select>

        </div>

      )}

      {active === 'advanced' && (

        <div className="space-y-2">

          <label>Opacity Slider</label>

          <input type="range" min="0" max="1" step="0.1" className="w-full" />

          <label>Ramp Curve</label>

          <canvas className="w-full h-20 bg-gray-200" /> {/* Curve editor */}

        </div>

      )}

    </div>

  );

}

components/content-studio/ExportQueue.tsx (Server Queue)

tsx

import { useState } from 'react';

import useContentStore from '../../lib/useContentStore';

 

export default function ExportQueue() {

  const { exportPreset } = useContentStore();

  const [queue, setQueue] = useState([]);

 

  const queueExport = async (preset) => {

    setQueue([...queue, { id: Date.now().toString(), preset, progress: 0 }]);

    const blob = await exportPreset(preset); // Lambda FFmpeg

    // Download blob

    const url = URL.createObjectURL(blob);

    const a = document.createElement('a');

    a.href = url;

    a.download = `export-${preset}.mp4`;

    a.click();

    setQueue(queue.filter(q => q.id !== queue[queue.length - 1].id));

  };

 

  return (

    <div className="absolute bottom-4 right-4 w-80 bg-white shadow rounded p-4">

      <h3 className="font-bold mb-2">Export Queue</h3>

      <select onChange={(e) => queueExport(e.target.value)} className="w-full p-2 border rounded mb-2">

        <option>LinkedIn Vertical</option>

        <option>Instagram Square</option>

      </select>

      {queue.map((job) => (

        <div key={job.id} className="space-y-1">

          <p>{job.preset} - {job.progress}%</p>

          <div className="w-full bg-gray-200 rounded-full h-2">

            <div className="bg-blue-600 h-2 rounded-full" style={{ width: `${job.progress}%` }} />

          </div>

        </div>

      ))}

      <p className="text-sm text-slate-600">1.2GB / 5GB used—pause to save quota?</p>

    </div>

  );

}

app/api/content/render/route.ts (Lambda FFmpeg API)

js

import { S3Client, PutObjectCommand } from '@aws-sdk/client-s3';

import { LambdaClient, InvokeCommand } from '@aws-sdk/client-lambda';

 

const s3 = new S3Client({ region: 'us-west-2' });

const lambda = new LambdaClient({ region: 'us-west-2' });

 

export async function POST(req) {

  const { timeline, settings, preset } = await req.json();

  // Upstash queue ID

  const queueId = await fetch('https://q.staging.upstash.io/jobs', { method: 'POST', headers: { Authorization: `Bearer ${process.env.UPSTASH_TOKEN}` }, body: JSON.stringify({ cmd: 'render', args: { timeline, settings, preset } } });

 

  // Lambda invoke for FFmpeg

  const params = { FunctionName: 'ffmpeg-render', Payload: JSON.stringify({ queueId }) };

  const { Payload } = await lambda.send(new InvokeCommand(params));

  const result = JSON.parse(new TextDecoder().decode(Payload));

 

  // S3 upload blob

  const command = new PutObjectCommand({ Bucket: 'slate360-exports', Key: `render-${Date.now()}.mp4`, Body: result.blob });

  await s3.send(command);

 

  return Response.json({ url: result.url });

}

Setup APIs/Keys

SendGrid: Sign up sendgrid.com (free 100 emails/day), get API key, add to .env: SENDGRID_API_KEY. Write in /api/sendgrid/route.ts (above example).
Upstash: upstash.com (Redis queue, free 10K ops/mo), get token, .env UPSTASH_TOKEN. Use for batch.
FFmpeg Lambda: AWS console → Functions → Create (runtime Node.js 18, code from AWS FFmpeg layer—search "ffmpeg-aws-lambda-layer"; IAM role S3 read/write). Invoke from route.ts.
Whisper/Real-ESRGAN: Hugging Face API (huggingface.co—free tier), .env HUGGINGFACE_TOKEN. Server-call in Lambda for server-side.
FreeSound: freesound.org API (free key for CC0 music), .env FREESOUND_KEY—fetch in carousel.
This impl emphasizes server-side (Lambda for renders—no PC load; queue with progress). Test/deploy; share feedback.


3.1. Client wrapper

app/virtual-studio/LinkedTourFromQuery.tsx

// app/virtual-studio/LinkedTourFromQuery.tsx
'use client';

import { useSearchParams } from 'next/navigation';
import { LinkedTourBanner } from '@/components/tours/LinkedTourBanner';

export function VirtualStudioLinkedTourFromQuery() {
  const params = useSearchParams();
  const tourId = params.get('tourId');

  if (!tourId) return null;

  return <LinkedTourBanner tourId={tourId} context="virtual-studio" />;
}

3.2. Use it in app/virtual-studio/page.tsx

At the top of your Virtual Studio page where we already have the floating HUD, we can drop the banner into the header row or just under it.

Example:

// app/virtual-studio/page.tsx
'use client';

import { Canvas } from '@react-three/fiber';
import { Environment, GizmoHelper, GizmoViewport } from '@react-three/drei';
import SceneLoader from '@/components/virtual/SceneLoader';
import XRaySlider from '@/components/virtual/XRaySlider';
import FloatingToolbar from '@/components/virtual/FloatingToolbar';
import CollaboratorCursors from '@/components/virtual/CollaboratorCursors';
import { VirtualStudioLinkedTourFromQuery } from './LinkedTourFromQuery';

export default function VirtualStudioPage() {
  return (
    <div className="h-screen w-screen bg-slate-950 relative overflow-hidden">
      {/* 3D canvas */}
      <div className="absolute inset-0 z-0">
        <Canvas shadows camera={{ position: [10, 10, 10], fov: 50 }}>
          <Environment preset="city" />
          <SceneLoader />
          <CollaboratorCursors />
          <GizmoHelper alignment="bottom-right" margin={[80, 80]}>
            <GizmoViewport
              axisColors={['#9d4b4b', '#2f7f4f', '#3b5b9d']}
              labelColor="white"
            />
          </GizmoHelper>
        </Canvas>
      </div>

      {/* Top glass header */}
      <header className="absolute top-4 left-4 right-4 z-10 space-y-2">
        <div className="h-14 bg-slate-900/80 backdrop-blur-md rounded-2xl border border-slate-700 flex items-center justify-between px-6 shadow-2xl">
          <div className="flex items-center gap-4">
            <h1 className="font-orbitron font-bold text-lg text-white">Virtual Studio</h1>
            <span className="text-xs text-slate-400">Project / Floor</span>
          </div>
          {/* Invite button etc. */}
        </div>

        {/* NEW: linked tour banner if ?tourId=... */}
        <VirtualStudioLinkedTourFromQuery />
      </header>

      {/* Bottom X-Ray slider */}
      <div className="absolute bottom-8 left-1/2 -translate-x-1/2 w-96 z-10">
        <XRaySlider />
      </div>

      {/* Right toolbar */}
      <div className="absolute top-24 right-4 flex flex-col gap-2 z-10">
        <FloatingToolbar />
      </div>
    </div>
  );
}


Content Studio: Read tourId from URL

Same pattern again.

4.1. Client wrapper

app/content/LinkedTourFromQuery.tsx

// app/content/LinkedTourFromQuery.tsx
'use client';

import { useSearchParams } from 'next/navigation';
import { LinkedTourBanner } from '@/components/tours/LinkedTourBanner';

export function ContentStudioLinkedTourFromQuery() {
  const params = useSearchParams();
  const tourId = params.get('tourId');

  if (!tourId) return null;

  return <LinkedTourBanner tourId={tourId} context="content" />;
}

4.2. Use it in app/content/page.tsx
// app/content/page.tsx
import type { Metadata } from 'next';
import { ContentStudioLinkedTourFromQuery } from './LinkedTourFromQuery';
// import your existing Content Studio components

export const metadata: Metadata = {
  title: 'Slate360 – Content Studio',
};

export default function ContentStudioPage() {
  return (
    <div className="min-h-screen bg-slate-950 text-slate-100 flex flex-col">
      {/* Optional: dashboard shell header */}

      <main className="flex-1 px-4 py-4 sm:px-6 lg:px-8 space-y-3">
        {/* NEW: linked tour banner */}
        <ContentStudioLinkedTourFromQuery />

        {/* Existing Content Studio layout / video tools */}
      </main>
    </div>
  );
}

 