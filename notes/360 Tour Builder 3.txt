360 Tour Builder Tab: Thorough Review & Specification
Generated by Grok on November 20, 2025
This spec synthesizes all uploaded documents (e.g., "Project Overview Slate360.docx" for 360 photo stitching/multi-scene tours/hotspots; "Most recent code and updates from grok.docx" for photo stitching/timelapse enhancement; "UI customization toolbars consistency.docx" for expandable toolbars; "A baseline summary.docx" for exports/sharing/embed codes; "Constructure Breakdown.docx" for hosting/virtual tours; "old chat grok.docx" for integrations like Google Maps/Zillow; "homepage and dashboard.docx" for dashboard flows) and ChatGPT feedback (AEC workflows like inspections/QA/safety/progress documentation, spatial context with plans/models/floors, external sharing with password/expiry/white-label/custom domains, Google/MLS exports, cross-tab like Geospatial inbox/Content grading/BIM sync/Hub attach/Reports metrics/VR conversion/CEO quotas, permissions with per-tour roles/org templates/audit trail, UX with 3-step flows/wizards/help overlays/tooltips, technical with Pannellum core/JSON configs/DB/S3, AI pluggable/ONNX for detection, phased roadmap, cost-conscious open-source like Remotion/MediaRecorder/sharp). Covers Kuula/Zillow replacement as tour hub—superior with construction-native (RFI-linked hotspots, time-series progress sliders, QA checklists), seamless Slate360 integration (drone captures from Geospatial, video grading from Content, model pins from Design). Basics (upload/stitch/share) + value (branded embeds, analytics). Flows to dashboard/other tabs (e.g., tours → Hub attach, embeds to Analytics views). Profiles customize (e.g., Creator: Branding presets prominent). Mobile: Upload/view (no stitching—queue server + swipe scenes). RBAC: Owner isolation (org_id—no user tour access). No conflicts: Pannellum for stitching (single canvas with hotspots); Hugin wasm for manual (lazy-load). All open-source/free: Pannellum/Hugin/Remotion/sharp/ONNX (no subs beyond storage/Lambda—free tiers for <100 tours/mo; pluggable AI via user keys). Help amplified (steppers/wizards, search for scenes, tooltips). Data transparency: Metrics (e.g., "2GB/5GB used—pause hosting?"). Autosave: Scene layout every 10s (Zustand + S3 snapshot). Selling point: Server-side stitching/hosting (Lambda/Hugin—no local compute; quotas pause free embeds).
Modes for User-Friendliness: Simple mode (realtors/owners: Scenes/hotspots/share—minimal UI) vs Advanced (VDC/contractors: Plans/BIM/QA/AI/keyframes—toggle in toolbar, stored per profile). AI toggles: Checkbox with subtle disclaimer tooltip ("AI suggest—verify placement; not perfect, disclaim accuracy").
Efficiency Optimizations: Lazy/dynamic imports for heavy (e.g., Remotion only on Advanced/keyframe use—no slow down in Simple). Wasm lazy-load (Hugin <50MB on demand). Queue server-side (Lambda) for stitching—progress/cancel without browser lag.
1. Description
360 Tour Builder is the intuitive tour creation workspace for realtors/contractors—expandable canvas for photo/video stitching, timeline for multi-scene sequencing, libraries for hotspots/branding, and server queue for AI enhancements (auto-align/suggest). For Kuula/Zillow: Manual/auto stitching from cams/drones, hotspots with embeds (photos/videos/notes from Content), branded hosting (logos/transitions), embed codes for sites. Superior: AI hotspot placement (Gemini suggest "Pin inspection note here"), progression tours (morph from Geospatial scans), VR conversion (Pannellum to A-Frame). AEC workflows: Inspections/QA checklists/hotspots linked to RFIs/punch lists, progress time-sliders (before/after split-view), safety training (acknowledgement hotspots). User needs: Realtors (staging embeds); contractors (site progress). Integrates: Panoramas from Geospatial drones, videos from Content, models from Design (pin to tours). 1-3 clicks: Drag photos → auto-stitch → share embed. Quotas: Free 5 tours, pause hosting (metrics: "Embed 80% quota—pause to save?"). Autosave: Scene layout every 10s (Zustand + S3 snapshot).
2. Exhaustive Features & Capabilities

Workspace/Canvas: 70% Pannellum viewport (pan/tilt/zoom navigation/fullscreen; multi-monitor breakouts via portal—drag scene to new tab). Expandable toolbars (top: Stitch/sequence/export/AI toggle; left: Libraries carousel for hotspots/templates; right: Settings basic/advanced—sliders hotspot opacity/path curves).
Stitching/Sequencing: Auto/manual from cams/drones (Hugin wasm auto-align/horizon correction, manual drag points). Timeline for multi-scene (magnetic snap scenes to paths—Remotion curves for smooth transitions). Layers toggle (photos/video/hotspots—visibility for previews; plan overlay mode with floor selector).
Hotspots/Branding: Drag hotspots (photos/videos/notes/logos/docs from Content/Hub—Pannellum embeds; AI suggest placement "Optimal for door inspection"—toggle checkbox with disclaimer tooltip: "Verify; AI not perfect, disclaim accuracy"). Branding (logos/text/transitions—opacity sliders, keyframe paths; org templates for white-label/custom domains).
Imports: From Slate360 folders (drag panoramas from Geospatial, videos from Content, models from Design as pins—react-dropzone; capture inbox for drone pushes with geotags).
AI Capabilities: Free toggles (auto-stitch Hugin/Gemini alignment, hotspot suggest "Pin QA note here", smart grouping by floor/time/plan position—disclaimer tooltip). Batch enhance (Upstash queue multi-scene).
Hosting/Sharing: Embed codes (iframe for Zillow/sites—custom domains white-label, sizes presets full/hero/inline; password/expiry/watermark options). Public viewers (S3-hosted Pannellum—no login). Analytics (views/hotspot clicks/time per scene Supabase log).
VR Conversion: One-click to A-Frame WebXR (Pannellum export—hotspots intact; headset-friendly navigation).
Exports: Presets (Kuula embed, Google Street View KML/metadata/GSV push, MLS links—no branding). Social (Instagram 360 clips—Remotion MP4). Thumbnails auto-gen (frame extract jsPDF).
Other: Audio narration sync (Web Audio for tour voiceover), waveform editor (visual hotspot timing), raw de-bayer (OpenCV for drone panoramas), progress time-slider (serial captures before/after split-view).

3. How It Works (1-3 Step Processes)

Upload/Stitch: (1) Drag photos/videos to canvas (or inbox from Geospatial geotags) → (2) Auto-align/group (Hugin toggle/AI by floor) → (3) Sequence scenes (timeline snap; wizard for first tour).
Hotspots/Brand: (1) Drag media to surface → (2) AI suggest placement (toggle/disclaimer tooltip) → (3) Adjust opacity/path (sliders; link to RFI from Hub).
AI Enhance: (1) Select scenes → (2) Toggle auto-stitch/hotspot suggest (disclaimer) → (3) Queue batch (Upstash progress—server Lambda).
VR/Export: (1) Toggle VR → (2) Preview A-Frame → (3) Gen embed/KML/GSV (Pannellum; MLS preset no watermark—3-step wizard).
Share: (1) Select preset (Zillow) → (2) Set permissions (public/protected/password/expiry/white-label) → (3) Copy link/email (SendGrid; deep-link view presets like "?scene=lobby").
Flows: Tour save → dashboard thumbnail; hotspots from Content → timeline import; embeds to Analytics views log; plan pins from Hub → mini-map.

4. Integrations with Dashboard/Other Tabs

Dashboard: Thumbnails from tours (Pannellum preview S3); drag to folders → metrics update. Profile (e.g., Creator: Embed presets prominent). Sharing: Link batch (e.g., tour to Virtual VR).
Other Tabs: Panoramas from Geospatial (auto-inbox/group by GPS), videos/hotspots from Content (drag to scenes), models from Design (pin as 3D hotspots). Exports to Analytics (view logs), Hub (attach to projects/RFIs/punch lists—e.g., "Open tour at this location"). Reverse: Hub RFIs → hotspot links; Content grading → hotspot clips; BIM sync ("Open nearest 360" from Design).
CEO Tab: Isolated (no user tour access—Supabase org_id; aggregate hosting metrics/quotas/bandwidth billing).

5. Tech Stack/Dependencies/Versions/Compat/APIs/Open-Source/AI/Integrations

Core: Next.js 14.2.5, React 18.3.1, Tailwind 3.4.0 (expandable canvas overflow-hidden).
Canvas/UI: Pannellum-react 1.2.4 (viewport/stitching), react-portal 4.4.1 (breakouts), react-arborist 3.0.0 (hotspot tree), react-dropzone 14.2.3 (imports).
Stitching/Sequencing: Hugin wasm 2023.0.0 (manual align/horizon), Remotion 4.0.0 (scene curves/transitions/MP4 exports—MIT free).
Hotspots/Branding: A-Frame 1.5.0 (VR conversion), Fabric.js 5.3.0 (logo/text opacity).
AI: @google/generative-ai 0.2.1 (hotspot suggest/grouping—server, disclaim; free tier $0.0001/invoke, pluggable user keys/ONNX Runtime Web for detection—MIT free).
Export/Libs: jsPDF 2.5.1 (thumbnails/KML), sharp 0.32.6 (image ops/thumbs—free Node lib), FreeSound CC0 API (narration music—100+ drag).
Compat Issues: Pannellum mobile pan (hammerjs 2.0.8 touch); Hugin wasm RAM (lazy-load <50MB scenes; ONNX for AI detection—free MIT, no clash). Versions pinned (audit clean).
APIs/Open-Source: Google Maps API (KML/GSV export—$200 credit free), Upstash (batch queue—free 10K ops). Open-Source: Hugin (stitch), Remotion (sequencing), sharp (images).
Data Transparency/Cost Limits: Metrics panel (gauge "2GB/5GB used—pause hosting?"); auto-throttle (Upstash check—pause free embeds, suggest upgrade toast). Server-side best practices: Lambda for stitching (Hugin renders—progress Realtime, cancel via job ID—$0.10/scene on paid; free cap 5 tours; sharp for thumbs no extra cost).

6. UI/Design (Clean, Intuitive, Familiar)

Layout: Toolbar top (Stitch/Sequence/Export/AI toggle, scene dropdown—familiar dashboard). Central canvas (70%: Pannellum viewport, layer toggles left mini-rail for hotspots/scenes). Expandable right (queue/progress, settings basic/advanced: Sliders hotspot opacity/path curves). Bottom hosting (embed preview). Hover icons (? tooltips: "Drag hotspot to surface"). Drag-drop (photos to canvas, videos to timeline). Profiles: Custom saves (e.g., Creator: Branding presets pinned). Mobile: Upload/view (no stitching—queue server + swipe scenes).
Clean/Intuitive: Simple/Advanced modes (toggle: Simple for realtors/owners—scenes/hotspots/share; Advanced for VDC/contractors—plans/BIM/QA/AI/keyframes; stored per profile). Collapsible panels (resize drag handles; double-click collapse—left/right slide away). Three-dot depth; empty state CTAs ("Drag First Panorama"). 1-3 step guides (stepper in stitch: "1. Upload Photos 2. Auto-Align 3. Add Hotspot"; wizards for first tour/GSV export).

7. Basic Things Covered (Kuula/Zillow Replacement)

Workspace/Stitching: Pannellum canvas (pan/zoom for tours), auto/manual (Hugin align).
Sequencing: Timeline multi-scene (Remotion snap paths/transitions).
Hotspots/Branding: Drag embeds (Pannellum photos/videos/logos—opacity keyframe).
Imports: From folders (panoramas from Geospatial, videos from Content).
AI/Auto: Stitch suggest (Gemini), hotspot placement (disclaimer).
Hosting/Exports: Embed codes (iframe/Zillow), KML for Maps.

8. Missed Features (From Uploads Review)

Scene-Change Anomaly ("Most recent code"): OpenCV auto-sequence cuts.
Batch Queue ("old chat grok"): Upstash multi-stitch.
Waveform Trim ("UI customization"): Web Audio for narration paths.
Thumbnail Auto-Gen ("A baseline"): Frame extract jsPDF for embeds.
Log De-Bayer (prompt): OpenCV raw panoramas.

9. Value/Impress Features (10+ Ideas)

AI Hotspot Suggest (New): Gemini "Pin inspection at door" (1-click place—vs. Kuula manual).
Progression Tours (prompt): Morph Geospatial scans to 4D tour (Remotion interp—wow site evolution).
VR Auto-Convert (prompt): Pannellum to A-Frame (hotspots intact—Zillow VR ready).
Voiceover Sync (prompt): Mic narration auto-align to paths (Web Audio beat).
Branding Marketplace (prompt): CC0 logos/transitions carousel (apply to embeds).
Embed Analytics (prompt): Supabase log views/clicks (Zillow-like insights).
Batch Social Export (prompt): Parallel queue (Instagram 360 clips + LinkedIn MP4).
Noise Gate Auto (prompt): Web Audio ML for field narration (hands-free).
Transition Library (prompt): 20+ Pannellum drag (fades/wipes preview).
Clip Analytics (prompt): Embed tracks hotspot interactions (marketers wow).
Raw Log De-Bayer (prompt): OpenCV auto drone panoramas.

10. Help/FAQ/Search/Guides/Icons/Processes

Search: Toolbar fuzzy (Cmd+K: "Hotspot Door," "Scene V2").
Icons: Hover ? (tooltip: "Magnetic snap—aligns scenes to paths").
Guides: Steppers (e.g., "Stitch: 1. Upload Panoramas 2. Auto-Align 3. Add Hotspot").
FAQ: /help search ("How to embed in Zillow?").
Processes: Modals (e.g., AI: Stepper "1. Toggle Suggest 2. Queue 3. Verify").

Phased Development Roadmap (Integrated from ChatGPT)
Phase 1 – UI Skeleton: Layout, canvas, libraries, timeline, presets (Pannellum core, JSON configs in Supabase).
Phase 2 – Wire to Real Data: S3 for assets (presigns), Supabase tours/hotspots tables (user_id gating).
Phase 3 – Background Processing: Upstash/Lambda for stitching (Hugin renders, progress Realtime).
Phase 4 – Smart AI & Branding: Gemini calls (server/hotspot suggest), org templates (white-label embeds).
Phase 5 – Mobile & Exports: PWA capture (getUserMedia upload), GSV/MLS push (KML metadata).
Ready for full write-out with code (like Content Creation)? Or share with ChatGPT first?


360 Tour Builder Tab: Master Summary & Breakdown with Complete Code
Generated by Grok on November 20, 2025
This master spec integrates all prior uploads (e.g., "Project Overview Slate360.docx" for 360 photo stitching/multi-scene tours/hotspots; "Most recent code and updates from grok.docx" for photo stitching/timelapse enhancement; "UI customization toolbars consistency.docx" for expandable toolbars; "A baseline summary.docx" for exports/sharing/embed codes; "Constructure Breakdown.docx" for hosting/virtual tours; "old chat grok.docx" for integrations like Google Maps/Zillow; "homepage and dashboard.docx" for dashboard flows) and ChatGPT feedback (AEC workflows like inspections/QA/safety/progress documentation, spatial context with plans/models/floors, external sharing with password/expiry/white-label/custom domains, Google/MLS exports, cross-tab like Geospatial inbox/Content grading/BIM sync/Hub attach/Reports metrics/VR conversion/CEO quotas, permissions with per-tour roles/org templates/audit trail, UX with 3-step flows/wizards/help overlays/tooltips, technical with Pannellum core/JSON configs/DB/S3, AI pluggable/ONNX for detection, phased roadmap, cost-conscious open-source like Remotion/MediaRecorder/sharp). Covers Kuula/Zillow replacement as tour hub—superior with construction-native (RFI-linked hotspots, time-series progress sliders, QA checklists), seamless Slate360 integration (drone captures from Geospatial, video grading from Content, model pins from Design). Basics (upload/stitch/share) + value (branded embeds, analytics). Flows to dashboard/other tabs (e.g., tours → Hub attach, embeds to Analytics views). Profiles customize (e.g., Creator: Branding presets prominent). Mobile: Upload/view (no stitching—queue server + swipe scenes). RBAC: Owner isolation (org_id—no user tour access). No conflicts: Pannellum for stitching (single canvas with hotspots); Hugin wasm for manual (lazy-load). All open-source/free: Pannellum/Hugin/Remotion/sharp/ONNX (no subs beyond storage/Lambda—free tiers for <100 tours/mo; pluggable AI via user keys). Help amplified (steppers/wizards, search for scenes, tooltips). Data transparency: Metrics (e.g., "2GB/5GB used—pause hosting?"). Autosave: Scene layout every 10s (Zustand + S3 snapshot). Selling point: Server-side stitching/hosting (Lambda/Hugin—no local compute; quotas pause free embeds).
Modes for User-Friendliness: Simple mode (realtors/owners: Scenes/hotspots/share—minimal UI) vs Advanced (VDC/contractors: Plans/BIM/QA/AI/keyframes—toggle in toolbar, stored per profile). AI toggles: Checkbox with subtle disclaimer tooltip ("AI suggest—verify placement; not perfect, disclaim accuracy").
Efficiency Optimizations: Lazy/dynamic imports for heavy (e.g., Remotion only on Advanced/keyframe use—no slow down in Simple). Wasm lazy-load (Hugin <50MB on demand). Queue server-side (Lambda) for stitching—progress/cancel without browser lag.
1. Description
360 Tour Builder is the intuitive tour creation workspace for realtors/contractors—expandable canvas for photo/video stitching, timeline for multi-scene sequencing, libraries for hotspots/branding, and server queue for AI enhancements (auto-align/suggest). For Kuula/Zillow: Manual/auto stitching from cams/drones, hotspots with embeds (photos/videos/notes from Content), branded hosting (logos/transitions), embed codes for sites. Superior: AI hotspot placement (Gemini suggest "Pin inspection note here"), progression tours (morph from Geospatial scans), VR conversion (Pannellum to A-Frame). AEC workflows: Inspections/QA checklists/hotspots linked to RFIs/punch lists, progress time-sliders (before/after split-view), safety training (acknowledgement hotspots). User needs: Realtors (staging embeds); contractors (site progress). Integrates: Panoramas from Geospatial drones, videos from Content, models from Design (pin to tours). 1-3 clicks: Drag photos → auto-stitch → share embed. Quotas: Free 5 tours, pause hosting (metrics: "Embed 80% quota—pause to save?"). Autosave: Scene layout every 10s (Zustand + S3 snapshot).
2. Exhaustive Features & Capabilities

Workspace/Canvas: 70% Pannellum viewport (pan/tilt/zoom navigation/fullscreen; multi-monitor breakouts via portal—drag scene to new tab). Expandable toolbars (top: Stitch/sequence/export/AI toggle; left: Libraries carousel for hotspots/templates; right: Settings basic/advanced—sliders hotspot opacity/path curves).
Stitching/Sequencing: Auto/manual from cams/drones (Hugin wasm auto-align/horizon correction, manual drag points). Timeline for multi-scene (magnetic snap scenes to paths—Remotion curves for smooth transitions). Layers toggle (photos/video/hotspots—visibility for previews; plan overlay mode with floor selector).
Hotspots/Branding: Drag hotspots (photos/videos/notes/logos/docs from Content/Hub—Pannellum embeds; AI suggest placement "Optimal for door inspection"—toggle checkbox with disclaimer tooltip: "Verify; AI not perfect, disclaim accuracy"). Branding (logos/text/transitions—opacity sliders, keyframe paths; org templates for white-label/custom domains).
Imports: From Slate360 folders (drag panoramas from Geospatial, videos from Content, models from Design as pins—react-dropzone; capture inbox for drone pushes with geotags).
AI Capabilities: Free toggles (auto-stitch Hugin/Gemini alignment, hotspot suggest "Pin QA note here", smart grouping by floor/time/plan position—disclaimer tooltip). Batch enhance (Upstash queue multi-scene).
Hosting/Sharing: Embed codes (iframe for Zillow/sites—custom domains white-label, sizes presets full/hero/inline; password/expiry/watermark options). Public viewers (S3-hosted Pannellum—no login). Analytics (views/hotspot clicks/time per scene Supabase log).
VR Conversion: One-click to A-Frame WebXR (Pannellum export—hotspots intact; headset-friendly navigation).
Exports: Presets
give me the full write-out of code for this:
 
"360 Tour Builder Tab: Thorough Review & Specification
Generated by Grok on November 20, 2025 This spec synthesizes all uploaded documents (e.g., "Project Overview Slate360.docx" for 360 photo stitching/multi-scene tours/hotspots; "Most recent code and updates from grok.docx" for photo stitching/timelapse enhancement; "UI customization toolbars consistency.docx" for expandable toolbars; "A baseline summary.docx" for exports/sharing/embed codes; "Constructure Breakdown.docx" for hosting/virtual tours; "old chat grok.docx" for integrations like Google Maps/Zillow; "homepage and dashboard.docx" for dashboard flows) and ChatGPT feedback (AEC workflows like inspections/QA/safety/progress documentation, spatial context with plans/models/floors, external sharing with password/expiry/white-label/custom domains, Google/MLS exports, cross-tab like Geospatial inbox/Content grading/BIM sync/Hub attach/Reports metrics/VR conversion/CEO quotas, permissions with per-tour roles/org templates/audit trail, UX with 3-step flows/wizards/help overlays/tooltips, technical with Pannellum core/JSON configs/DB/S3, AI pluggable/ONNX for detection, phased roadmap, cost-conscious open-source like Remotion/MediaRecorder/sharp). Covers Kuula/Zillow replacement as tour hub—superior with construction-native (RFI-linked hotspots, time-series progress sliders, QA checklists), seamless Slate360 integration (drone captures from Geospatial, video grading from Content, model pins from Design). Basics (upload/stitch/share) + value (branded embeds, analytics). Flows to dashboard/other tabs (e.g., tours → Hub attach, embeds to Analytics views). Profiles customize (e.g., Creator: Branding presets prominent). Mobile: Upload/view (no stitching—queue server + swipe scenes). RBAC: Owner isolation (org_id—no user tour access). No conflicts: Pannellum for stitching (single canvas with hotspots); Hugin wasm for manual (lazy-load). All open-source/free: Pannellum/Hugin/Remotion/sharp/ONNX (no subs beyond storage/Lambda—free tiers for <100 tours/mo; pluggable AI via user keys). Help amplified (steppers/wizards, search for scenes, tooltips). Data transparency: Metrics (e.g., "2GB/5GB used—pause hosting?"). Autosave: Scene layout every 10s (Zustand + S3 snapshot). Selling point: Server-side stitching/hosting (Lambda/Hugin—no local compute; quotas pause free embeds).
Modes for User-Friendliness: Simple mode (realtors/owners: Scenes/hotspots/share—minimal UI) vs Advanced (VDC/contractors: Plans/BIM/QA/AI/keyframes—toggle in toolbar, stored per profile). AI toggles: Checkbox with subtle disclaimer tooltip ("AI suggest—verify placement; not perfect, disclaim accuracy").
Efficiency Optimizations: Lazy/dynamic imports for heavy (e.g., Remotion only on Advanced/keyframe use—no slow down in Simple). Wasm lazy-load (Hugin <50MB on demand). Queue server-side (Lambda) for stitching—progress/cancel without browser lag.

Description
360 Tour Builder is the intuitive tour creation workspace for realtors/contractors—expandable canvas for photo/video stitching, timeline for multi-scene sequencing, libraries for hotspots/branding, and server queue for AI enhancements (auto-align/suggest). For Kuula/Zillow: Manual/auto stitching from cams/drones, hotspots with embeds (photos/videos/notes from Content), branded hosting (logos/transitions), embed codes for sites. Superior: AI hotspot placement (Gemini suggest "Pin inspection note here"), progression tours (morph from Geospatial scans), VR conversion (Pannellum to A-Frame). AEC workflows: Inspections/QA checklists/hotspots linked to RFIs/punch lists, progress time-sliders (before/after split-view), safety training (acknowledgement hotspots). User needs: Realtors (staging embeds); contractors (site progress). Integrates: Panoramas from Geospatial drones, videos from Content, models from Design (pin to tours). 1-3 clicks: Drag photos → auto-stitch → share embed. Quotas: Free 5 tours, pause hosting (metrics: "Embed 80% quota—pause to save?"). Autosave: Scene layout every 10s (Zustand + S3 snapshot).
Exhaustive Features & Capabilities


Workspace/Canvas: 70% Pannellum viewport (pan/tilt/zoom navigation/fullscreen; multi-monitor breakouts via portal—drag scene to new tab). Expandable toolbars (top: Stitch/sequence/export/AI toggle; left: Libraries carousel for hotspots/templates; right: Settings basic/advanced—sliders hotspot opacity/path curves).
Stitching/Sequencing: Auto/manual from cams/drones (Hugin wasm auto-align/horizon correction, manual drag points). Timeline for multi-scene (magnetic snap scenes to paths—Remotion curves for smooth transitions). Layers toggle (photos/video/hotspots—visibility for previews; plan overlay mode with floor selector).
Hotspots/Branding: Drag hotspots (photos/videos/notes/logos/docs from Content/Hub—Pannellum embeds; AI suggest placement "Optimal for door inspection"—toggle checkbox with disclaimer tooltip: "Verify; AI not perfect, disclaim accuracy"). Branding (logos/text/transitions—opacity sliders, keyframe paths; org templates for white-label/custom domains).
Imports: From Slate360 folders (drag panoramas from Geospatial, videos from Content, models from Design as pins—react-dropzone; capture inbox for drone pushes with geotags).
AI Capabilities: Free toggles (auto-stitch Hugin/Gemini alignment, hotspot suggest "Pin QA note here", smart grouping by floor/time/plan position—disclaimer tooltip). Batch enhance (Upstash queue multi-scene).
Hosting/Sharing: Embed codes (iframe for Zillow/sites—custom domains white-label, sizes presets full/hero/inline; password/expiry/watermark options). Public viewers (S3-hosted Pannellum—no login). Analytics (views/hotspot clicks/time per scene Supabase log).
VR Conversion: One-click to A-Frame WebXR (Pannellum export—hotspots intact; headset-friendly navigation).
Exports: Presets (Kuula embed, Google Street View KML/metadata/GSV push, MLS links—no branding). Social (Instagram 360 clips—Remotion MP4). Thumbnails auto-gen (frame extract jsPDF).
Other: Audio narration sync (Web Audio for tour voiceover), waveform editor (visual hotspot timing), raw de-bayer (OpenCV for drone panoramas), progress time-slider (serial captures before/after split-view).


How It Works (1-3 Step Processes)
Upload/Stitch: (1) Drag photos/videos to canvas (or inbox from Geospatial geotags) → (2) Auto-align/group (Hugin toggle/AI by floor) → (3) Sequence scenes (timeline snap; wizard for first tour).
Hotspots/Brand: (1) Drag media to surface → (2) AI suggest placement (toggle/disclaimer tooltip) → (3) Adjust opacity/path (sliders; link to RFI from Hub).
AI Enhance: (1) Select scenes → (2) Toggle auto-stitch/hotspot suggest (disclaimer) → (3) Queue batch (Upstash progress—server Lambda).
VR/Export: (1) Toggle VR → (2) Preview A-Frame → (3) Gen embed/KML/GSV (Pannellum; MLS preset no watermark—3-step wizard).
Share: (1) Select preset (Zillow) → (2) Set permissions (public/protected/password/expiry/white-label) → (3) Copy link/email (SendGrid; deep-link view presets like "?scene=lobby").
Flows: Tour save → dashboard thumbnail; hotspots from Content → timeline import; embeds to Analytics views log; plan pins from Hub → mini-map.
Integrations with Dashboard/Other Tabs


Dashboard: Thumbnails from tours (Pannellum preview S3); drag to folders → metrics update. Profile (e.g., Creator: Embed presets prominent). Sharing: Link batch (e.g., tour to Virtual VR).
Other Tabs: Panoramas from Geospatial (auto-inbox/group by GPS), videos/hotspots from Content (drag to scenes), models from Design (pin as 3D hotspots). Exports to Analytics (view logs), Hub (attach to projects/RFIs/punch lists—e.g., "Open tour at this location"). Reverse: Hub RFIs → hotspot links; Content grading → hotspot clips; BIM sync ("Open nearest 360" from Design).
CEO Tab: Isolated (no user tour access—Supabase org_id; aggregate hosting metrics/quotas/bandwidth billing).


Tech Stack/Dependencies/Versions/Compat/APIs/Open-Source/AI/Integrations


Core: Next.js 14.2.5, React 18.3.1, Tailwind 3.4.0 (expandable canvas overflow-hidden).
Canvas/UI: Pannellum-react 1.2.4 (viewport/stitching), react-portal 4.4.1 (breakouts), react-arborist 3.0.0 (hotspot tree), react-dropzone 14.2.3 (imports).
Stitching/Sequencing: Hugin wasm 2023.0.0 (manual align/horizon), Remotion 4.0.0 (scene curves/transitions/MP4 exports—MIT free).
Hotspots/Branding: A-Frame 1.5.0 (VR conversion), Fabric.js 5.3.0 (logo/text opacity).
AI: @google/generative-ai 0.2.1 (hotspot suggest/grouping—server, disclaim; free tier $0.0001/invoke, pluggable user keys/ONNX Runtime Web for detection—MIT free).
Export/Libs: jsPDF 2.5.1 (thumbnails/KML), sharp 0.32.6 (image ops/thumbs—free Node lib), FreeSound CC0 API (narration music—100+ drag).
Compat Issues: Pannellum mobile pan (hammerjs 2.0.8 touch); Hugin wasm RAM (lazy-load <50MB scenes; ONNX for AI detection—free MIT, no clash). Versions pinned (audit clean).
APIs/Open-Source: Google Maps API (KML/GSV export—$200 credit free), Upstash (batch queue—free 10K ops). Open-Source: Hugin (stitch), Remotion (sequencing), sharp (images).
Data Transparency/Cost Limits: Metrics panel (gauge "2GB/5GB used—pause hosting?"); auto-throttle (Upstash check—pause free embeds, suggest upgrade toast). Server-side best practices: Lambda for stitching (Hugin renders—progress Realtime, cancel via job ID—$0.10/scene on paid; free cap 5 tours; sharp for thumbs no extra cost).


UI/Design (Clean, Intuitive, Familiar)


Layout: Toolbar top (Stitch/Sequence/Export/AI toggle, scene dropdown—familiar dashboard). Central canvas (70%: Pannellum viewport, layer toggles left mini-rail for hotspots/scenes). Expandable right (queue/progress, settings basic/advanced: Sliders hotspot opacity/path curves). Bottom hosting (embed preview). Hover icons (? tooltips: "Drag hotspot to surface"). Drag-drop (photos to canvas, videos to timeline). Profiles: Custom saves (e.g., Creator: Branding presets pinned). Mobile: Upload/view (no stitching—queue server + swipe scenes).
Clean/Intuitive: Simple/Advanced modes (toggle: Simple for realtors/owners—scenes/hotspots/share; Advanced for VDC/contractors—plans/BIM/QA/AI/keyframes; stored per profile). Collapsible panels (resize drag handles; double-click collapse—left/right slide away). Three-dot depth; empty state CTAs ("Drag First Panorama"). 1-3 step guides (stepper in stitch: "1. Upload Photos 2. Auto-Align 3. Add Hotspot"; wizards for first tour/GSV export).


Basic Things Covered (Kuula/Zillow Replacement)


Workspace/Stitching: Pannellum canvas (pan/zoom for tours), auto/manual (Hugin align).
Sequencing: Timeline multi-scene (Remotion snap paths/transitions).
Hotspots/Branding: Drag embeds (Pannellum photos/videos/logos—opacity keyframe).
Imports: From folders (panoramas from Geospatial, videos from Content).
AI/Auto: Stitch suggest (Gemini), hotspot placement (disclaimer).
Hosting/Exports: Embed codes (iframe/Zillow), KML for Maps.


Missed Features (From Uploads Review)


Scene-Change Anomaly ("Most recent code"): OpenCV auto-sequence cuts.
Batch Queue ("old chat grok"): Upstash multi-stitch.
Waveform Trim ("UI customization"): Web Audio for narration paths.
Thumbnail Auto-Gen ("A baseline"): Frame extract jsPDF for embeds.
Log De-Bayer (prompt): OpenCV raw panoramas.


Value/Impress Features (10+ Ideas)
AI Hotspot Suggest (New): Gemini "Pin inspection at door" (1-click place—vs. Kuula manual).
Progression Tours (prompt): Morph Geospatial scans to 4D tour (Remotion interp—wow site evolution).
VR Auto-Convert (prompt): Pannellum to A-Frame (hotspots intact—Zillow VR ready).
Voiceover Sync (prompt): Mic narration auto-align to paths (Web Audio beat).
Branding Marketplace (prompt): CC0 logos/transitions carousel (apply to embeds).
Embed Analytics (prompt): Supabase log views/clicks (Zillow-like insights).
Batch Social Export (prompt): Parallel queue (Instagram 360 clips + LinkedIn MP4).
Noise Gate Auto (prompt): Web Audio ML for field narration (hands-free).
Transition Library (prompt): 20+ Pannellum drag (fades/wipes preview).
Clip Analytics (prompt): Embed tracks hotspot interactions (marketers wow).
Raw Log De-Bayer (prompt): OpenCV auto drone panoramas.
Help/FAQ/Search/Guides/Icons/Processes


Search: Toolbar fuzzy (Cmd+K: "Hotspot Door," "Scene V2").
Icons: Hover ? (tooltip: "Magnetic snap—aligns scenes to paths").
Guides: Steppers (e.g., "Stitch: 1. Upload Panoramas 2. Auto-Align 3. Add Hotspot").
FAQ: /help search ("How to embed in Zillow?").
Processes: Modals (e.g., AI: Stepper "1. Toggle Suggest 2. Queue 3. Verify").

Phased Development Roadmap (Integrated from ChatGPT)
Phase 1 – UI Skeleton: Layout, canvas, libraries, timeline, presets (Pannellum core, JSON configs in Supabase). Phase 2 – Wire to Real Data: S3 for assets (presigns), Supabase tours/hotspots tables (user_id gating). Phase 3 – Background Processing: Upstash/Lambda for stitching (Hugin renders, progress Realtime). Phase 4 – Smart AI & Branding: Gemini calls (server/hotspot suggest), org templates (white-label embeds). Phase 5 – Mobile & Exports: PWA capture (getUserMedia upload), GSV/MLS push (KML metadata).
Ready for full write-out with code (like Content Creation)? Or share with ChatGPT first?"Thought for 15s360 Tour Builder Tab: Thorough Review & Specification (Merged & Updated)
Generated by Grok on November 20, 2025
This spec merges the previous version with ChatGPT's expansions (e.g., motion/storytelling/MP4 exports via keyframed paths/easing/Remotion; text/logos/overlays with global/per-scene branding/watermarks; UI layout with center canvas/left-right collapsible panels/docking/resizing; Simple/Advanced modes for overwhelm prevention; sharing polish with embed builder/view presets/smart links/password/expiry/white-label; integration for tour collections/Content Studio output; open-source/free tools like Remotion/MediaRecorder/sharp for exports, ONNX for AI detection). All technically possible (no conflicts: Remotion for MP4 from Pannellum JSON; sharp for thumbs—MIT/free; lazy-load for efficiency). Open-source/free focus: Pannellum/Hugin/Remotion/sharp/ONNX/MediaRecorder/Web Audio (no subs beyond storage/Lambda—free tiers <100 tours/mo; pluggable AI via user keys for Gemini/ONNX detection). Powerful/user-friendly for subscribers sharing deliverables: Simple mode for realtors (quick branded embeds for clients), Advanced for contractors (QA-linked hotspots for subs/owners); 3-step wizards (e.g., "Stitch & Share") keep efficiency (lazy imports: Remotion only in Advanced—no slow Simple). UI fits other tabs (Toolbar top, central canvas 70%, expandable left/right panels—collapsible/double-click resize; bg-gray-50 light for focus). Help: Tooltips/steppers for sharing (e.g., "Client embed: No login needed"). Data transparency: Metrics pause free hosting ("80% quota—pause?").
1. Description
360 Tour Builder is the intuitive tour creation workspace for realtors/contractors—expandable canvas for photo/video stitching, timeline for multi-scene sequencing, libraries for hotspots/branding, and server queue for AI enhancements (auto-align/suggest). For Kuula/Zillow: Manual/auto stitching from cams/drones, hotspots with embeds (photos/videos/notes from Content), branded hosting (logos/transitions), embed codes for sites. Superior: AI hotspot placement (Gemini suggest "Pin inspection note here"), progression tours (morph from Geospatial scans), VR conversion (Pannellum to A-Frame). AEC workflows: Inspections/QA checklists/hotspots linked to RFIs/punch lists, progress time-sliders (before/after split-view), safety training (acknowledgement hotspots). User needs: Realtors (staging embeds for clients); contractors (site progress for subs/owners). Integrates: Panoramas from Geospatial drones, videos from Content, models from Design (pin to tours). 1-3 clicks: Drag photos → auto-stitch → share embed. Quotas: Free 5 tours, pause hosting (metrics: "Embed 80% quota—pause to save?"). Autosave: Scene layout every 10s (Zustand + S3 snapshot).
2. Exhaustive Features & Capabilities

Workspace/Canvas: 70% Pannellum viewport (pan/tilt/zoom navigation/fullscreen; multi-monitor breakouts via portal—drag scene to new tab). Expandable toolbars (top: Stitch/sequence/export/AI toggle; left: Libraries carousel for hotspots/templates; right: Settings basic/advanced—sliders hotspot opacity/path curves).
Stitching/Sequencing: Auto/manual from cams/drones (Hugin wasm auto-align/horizon correction, manual drag points). Timeline for multi-scene (magnetic snap scenes to paths—Remotion curves for smooth transitions). Layers toggle (photos/video/hotspots—visibility for previews; plan overlay mode with floor selector).
Hotspots/Branding: Drag hotspots (photos/videos/notes/logos/docs from Content/Hub—Pannellum embeds; AI suggest placement "Optimal for door inspection"—toggle checkbox with disclaimer tooltip: "Verify; AI not perfect, disclaim accuracy"). Branding (logos/text/transitions—opacity sliders, keyframe paths; org templates for white-label/custom domains).
Imports: From Slate360 folders (drag panoramas from Geospatial, videos from Content, models from Design as pins—react-dropzone; capture inbox for drone pushes with geotags).
AI Capabilities: Free toggles (auto-stitch Hugin/Gemini alignment, hotspot suggest "Pin QA note here", smart grouping by floor/time/plan position—disclaimer tooltip). Batch enhance (Upstash queue multi-scene).
Hosting/Sharing: Embed codes (iframe for Zillow/sites—custom domains white-label, sizes presets full/hero/inline; password/expiry/watermark options). Public viewers (S3-hosted Pannellum—no login). Analytics (views/hotspot clicks/time per scene Supabase log).
VR Conversion: One-click to A-Frame WebXR (Pannellum export—hotspots intact; headset-friendly navigation).
Exports: Presets (Kuula embed, Google Street View KML/metadata/GSV push, MLS links—no branding). Social (Instagram 360 clips—Remotion MP4). Thumbnails auto-gen (frame extract jsPDF).
Other: Audio narration sync (Web Audio for tour voiceover), waveform editor (visual hotspot timing), raw de-bayer (OpenCV for drone panoramas), progress time-slider (serial captures before/after split-view).

3. How It Works (1-3 Step Processes)

Upload/Stitch: (1) Drag photos/videos to canvas (or inbox from Geospatial geotags) → (2) Auto-align/group (Hugin toggle/AI by floor) → (3) Sequence scenes (timeline snap; wizard for first tour).
Hotspots/Brand: (1)


